generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Match {
  id          String   @id @default(uuid())
  uploadUrl   String
  status      MatchStatus @default(UPLOADED)
  duration    Int?     // in seconds
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  events      Event[]
}

model Event {
  id          String   @id @default(uuid())
  matchId     String
  match       Match    @relation(fields: [matchId], references: [id])
  timestamp   Float    // in seconds from start
  type        EventType
  confidence  Float
  createdAt   DateTime @default(now())
}

enum MatchStatus {
  UPLOADED
  PROCESSING
  COMPLETED
  FAILED
}

enum EventType {
  GOAL
  FOUL
  TACKLE
  SAVE
  Celebrate // emotion based
}
